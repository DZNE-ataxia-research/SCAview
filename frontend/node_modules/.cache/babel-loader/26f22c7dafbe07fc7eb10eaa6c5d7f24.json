{"ast":null,"code":"var _jsxFileName = \"/Users/philippwegner/Desktop/UKB/git/PostIDSN-Viewer/src/containers/Controls.tsx\";\nimport React, { useState } from 'react';\nimport './Controls.css';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Switch from '@material-ui/core/Switch';\nimport Slider from '@material-ui/core/Slider';\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport IconButton from '@material-ui/core/IconButton';\nimport CardHeader from '@material-ui/core/CardHeader'; //import * as Attributes from '../services/Attributes_old';\n\nimport { Fit, Legend } from '../services/Backend';\nimport CloseIcon from '@material-ui/icons/Close';\nimport FormControl from '@material-ui/core/FormControl';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport Alert from '@material-ui/lab/Alert'; // STRUCTURES\n\nexport let DiagramType;\n\n(function (DiagramType) {\n  DiagramType[DiagramType[\"Scatter\"] = 1] = \"Scatter\";\n  DiagramType[DiagramType[\"Histogram\"] = 2] = \"Histogram\";\n  DiagramType[DiagramType[\"Bar\"] = 3] = \"Bar\";\n  DiagramType[DiagramType[\"Timeline\"] = 4] = \"Timeline\";\n})(DiagramType || (DiagramType = {}));\n\nvar Control;\n\n(function (Control) {\n  Control[Control[\"attX\"] = 0] = \"attX\";\n  Control[Control[\"attY\"] = 1] = \"attY\";\n  Control[Control[\"attC\"] = 2] = \"attC\";\n  Control[Control[\"dt\"] = 3] = \"dt\";\n  Control[Control[\"visit\"] = 4] = \"visit\";\n  Control[Control[\"followup\"] = 5] = \"followup\";\n  Control[Control[\"tolerance\"] = 6] = \"tolerance\";\n  Control[Control[\"fit\"] = 7] = \"fit\";\n  Control[Control[\"norm\"] = 8] = \"norm\";\n  Control[Control[\"stack\"] = 9] = \"stack\";\n  Control[Control[\"legend\"] = 10] = \"legend\";\n  Control[Control[\"bins\"] = 11] = \"bins\";\n})(Control || (Control = {}));\n\nexport let Visit; // CONFIG\n\n(function (Visit) {\n  Visit[\"all\"] = \"ALL\";\n  Visit[\"baseline\"] = \"BASELINE\";\n  Visit[\"follow\"] = \"FOLLOW\";\n})(Visit || (Visit = {}));\n\nconst diagramTypeOptions = [{\n  label: 'Scatter',\n  value: DiagramType.Scatter\n}, {\n  label: 'Histogram',\n  value: DiagramType.Histogram\n}, {\n  label: 'Bar',\n  value: DiagramType.Bar\n}, {\n  label: 'Timeline',\n  value: DiagramType.Timeline\n}];\nconst visitOptions = [{\n  label: 'All visits',\n  value: Visit.all\n}, {\n  label: 'First visit',\n  value: Visit.baseline\n}, {\n  label: 'Follow-up visits',\n  value: Visit.follow\n}];\nconst diagramControlParameters = {\n  [DiagramType.Scatter]: {\n    [Control.attX]: {\n      visible: true,\n      datatypes: [Attributes.Datatype.float, Attributes.Datatype.int]\n    },\n    [Control.attY]: {\n      visible: true,\n      datatypes: [Attributes.Datatype.float, Attributes.Datatype.int]\n    },\n    [Control.attC]: {\n      visible: true,\n      datatypes: [Attributes.Datatype.subgroups, Attributes.Datatype.patients, Attributes.Datatype.float, Attributes.Datatype.int, Attributes.Datatype.code]\n    },\n    [Control.dt]: {\n      visible: true\n    },\n    [Control.visit]: {\n      visible: true\n    },\n    [Control.followup]: {\n      visible: true\n    },\n    [Control.tolerance]: {\n      visible: true\n    },\n    [Control.fit]: {\n      visible: true\n    },\n    [Control.norm]: {\n      visible: false\n    },\n    [Control.stack]: {\n      visible: false\n    },\n    [Control.legend]: {\n      visible: true\n    },\n    [Control.bins]: {\n      visible: false\n    }\n  },\n  [DiagramType.Histogram]: {\n    [Control.attX]: {\n      visible: true,\n      datatypes: [Attributes.Datatype.float, Attributes.Datatype.int]\n    },\n    [Control.attY]: {\n      visible: false,\n      datatypes: []\n    },\n    [Control.attC]: {\n      visible: true,\n      datatypes: [Attributes.Datatype.subgroups, Attributes.Datatype.patients, Attributes.Datatype.code]\n    },\n    [Control.dt]: {\n      visible: true\n    },\n    [Control.visit]: {\n      visible: true\n    },\n    [Control.followup]: {\n      visible: true\n    },\n    [Control.tolerance]: {\n      visible: true\n    },\n    [Control.fit]: {\n      visible: false\n    },\n    [Control.norm]: {\n      visible: true\n    },\n    [Control.stack]: {\n      visible: true\n    },\n    [Control.legend]: {\n      visible: true\n    },\n    [Control.bins]: {\n      visible: true\n    }\n  },\n  [DiagramType.Bar]: {\n    [Control.attX]: {\n      visible: true,\n      datatypes: [Attributes.Datatype.subgroups, Attributes.Datatype.patients, Attributes.Datatype.code]\n    },\n    [Control.attY]: {\n      visible: false,\n      datatypes: []\n    },\n    [Control.attC]: {\n      visible: true,\n      datatypes: [Attributes.Datatype.subgroups, Attributes.Datatype.patients, Attributes.Datatype.code]\n    },\n    [Control.dt]: {\n      visible: true\n    },\n    [Control.visit]: {\n      visible: true\n    },\n    [Control.followup]: {\n      visible: true\n    },\n    [Control.tolerance]: {\n      visible: true\n    },\n    [Control.fit]: {\n      visible: false\n    },\n    [Control.norm]: {\n      visible: true\n    },\n    [Control.stack]: {\n      visible: true\n    },\n    [Control.legend]: {\n      visible: true\n    },\n    [Control.bins]: {\n      visible: false\n    }\n  },\n  [DiagramType.Timeline]: {\n    [Control.attX]: {\n      visible: true,\n      datatypes: [Attributes.Datatype.date]\n    },\n    [Control.attY]: {\n      visible: true,\n      datatypes: [Attributes.Datatype.float, Attributes.Datatype.int]\n    },\n    [Control.attC]: {\n      visible: true,\n      datatypes: [Attributes.Datatype.float, Attributes.Datatype.int]\n    },\n    [Control.dt]: {\n      visible: true\n    },\n    [Control.visit]: {\n      visible: true\n    },\n    [Control.followup]: {\n      visible: true\n    },\n    [Control.tolerance]: {\n      visible: true\n    },\n    [Control.fit]: {\n      visible: true\n    },\n    [Control.norm]: {\n      visible: false\n    },\n    [Control.stack]: {\n      visible: false\n    },\n    [Control.legend]: {\n      visible: true\n    },\n    [Control.bins]: {\n      visible: false\n    }\n  }\n};\nexport const initialDiagramType = DiagramType.Scatter; // PROPS\n\nconst Controls = props => {\n  React.useEffect(() => {\n    onPropsChanged(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props]); // HELPER (see second part below)\n\n  const filterItems = datatypes => {\n    return Attributes.filter(datatypes);\n  }; // STATES\n  // dataState\n\n\n  const initialDataState = {\n    diagramType: initialDiagramType,\n    diagramControlParameter: diagramControlParameters[initialDiagramType],\n    attXData: filterItems(diagramControlParameters[initialDiagramType][Control.attX].datatypes || []),\n    attYData: filterItems(diagramControlParameters[initialDiagramType][Control.attY].datatypes || []),\n    attCData: filterItems(diagramControlParameters[initialDiagramType][Control.attC].datatypes || [])\n  };\n  const [dataState, setDataState] = useState(initialDataState);\n  const [currentBin, setCurrentBin] = useState(null); // HANDLERS\n\n  const onPropsChanged = () => {\n    if (props.controls && props.controls.type !== dataState.diagramType) {\n      onDiagramTypeChange(props.controls.type);\n    }\n  };\n\n  const onDiagramTypeChange = value => {\n    setDataState({\n      diagramType: value,\n      diagramControlParameter: diagramControlParameters[value],\n      attXData: filterItems(diagramControlParameters[value][Control.attX].datatypes || []),\n      attYData: filterItems(diagramControlParameters[value][Control.attY].datatypes || []),\n      attCData: filterItems(diagramControlParameters[value][Control.attC].datatypes || [])\n    });\n  }; // HELPER (see first part above)\n  // RENDER\n\n\n  return /*#__PURE__*/React.createElement(Card, {\n    className: \"configuration\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CardHeader, {\n    subheader: \"Plot Configurations\",\n    action: /*#__PURE__*/React.createElement(IconButton, {\n      size: \"small\",\n      \"aria-label\": \"close\",\n      onClick: () => {\n        props.onClose();\n      },\n      className: \"grid__item--close\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 369,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(CloseIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 13\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(CardContent, {\n    className: \"configuration__content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 381,\n      columnNumber: 7\n    }\n  }, !props.controls ? /*#__PURE__*/React.createElement(Alert, {\n    severity: \"info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 11\n    }\n  }, \"No plot selected\") : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form__title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 386,\n      columnNumber: 13\n    }\n  }, \"Graph Data\"), /*#__PURE__*/React.createElement(FormControl, {\n    variant: \"outlined\",\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 388,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(InputLabel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 389,\n      columnNumber: 15\n    }\n  }, \"Plot type\"), /*#__PURE__*/React.createElement(Select, {\n    value: props.controls.type,\n    onChange: event => {\n      props.onControlsChanged(props.controls.identifier, {\n        type: event.target.value\n      });\n    },\n    label: \"Plot type\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 15\n    }\n  }, diagramTypeOptions.map(diagramType => /*#__PURE__*/React.createElement(MenuItem, {\n    key: diagramType.value,\n    value: diagramType.value,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 400,\n      columnNumber: 19\n    }\n  }, diagramType.label)))), dataState.diagramControlParameter[Control.attX].visible && /*#__PURE__*/React.createElement(FormControl, {\n    variant: \"outlined\",\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 408,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Autocomplete, {\n    options: dataState.attXData.sort((a, b) => -b.topic.localeCompare(a.topic)),\n    groupBy: option => option.topic,\n    getOptionLabel: option => option.attributeTooltip,\n    value: dataState.attXData.find(a => a.attribute === props.controls.attX) || null,\n    onChange: (_event, newValue) => {\n      props.onControlsChanged(props.controls.identifier, {\n        attX: (newValue === null || newValue === void 0 ? void 0 : newValue.attribute) || ''\n      });\n    },\n    renderInput: params => /*#__PURE__*/React.createElement(TextField, Object.assign({}, params, {\n      label: \"X-coordinate item\",\n      variant: \"outlined\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 426,\n        columnNumber: 21\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 409,\n      columnNumber: 17\n    }\n  })), dataState.diagramControlParameter[Control.attY].visible && /*#__PURE__*/React.createElement(FormControl, {\n    variant: \"outlined\",\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 437,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Autocomplete, {\n    options: dataState.attYData.sort((a, b) => -b.topic.localeCompare(a.topic)),\n    groupBy: option => option.topic,\n    getOptionLabel: option => option.attributeTooltip,\n    value: dataState.attYData.find(a => a.attribute === props.controls.attY) || null,\n    onChange: (_event, newValue) => {\n      props.onControlsChanged(props.controls.identifier, {\n        attY: (newValue === null || newValue === void 0 ? void 0 : newValue.attribute) || ''\n      });\n    },\n    renderInput: params => /*#__PURE__*/React.createElement(TextField, Object.assign({}, params, {\n      label: \"Y-coordinate item\",\n      variant: \"outlined\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 455,\n        columnNumber: 21\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 438,\n      columnNumber: 17\n    }\n  })), dataState.diagramControlParameter[Control.attC].visible && /*#__PURE__*/React.createElement(FormControl, {\n    variant: \"outlined\",\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 466,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Autocomplete, {\n    options: dataState.attCData.sort((a, b) => -b.topic.localeCompare(a.topic)),\n    groupBy: option => option.topic,\n    getOptionLabel: option => option.attributeTooltip,\n    value: dataState.attCData.find(a => a.attribute === props.controls.attC) || null,\n    onChange: (_event, newValue) => {\n      props.onControlsChanged(props.controls.identifier, {\n        attC: (newValue === null || newValue === void 0 ? void 0 : newValue.attribute) || ''\n      });\n    },\n    renderInput: params => /*#__PURE__*/React.createElement(TextField, Object.assign({}, params, {\n      label: \"Third item\",\n      variant: \"outlined\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 484,\n        columnNumber: 21\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 467,\n      columnNumber: 17\n    }\n  })), dataState.diagramControlParameter[Control.dt].visible && /*#__PURE__*/React.createElement(TextField, {\n    variant: \"outlined\",\n    fullWidth: true,\n    type: \"number\",\n    label: \"Time span of a visit (Days)\",\n    value: props.controls.dt || 0,\n    onChange: event => {\n      props.onControlsChanged(props.controls.identifier, {\n        dt: +event.target.value\n      });\n    },\n    InputProps: {\n      inputProps: {\n        min: 0\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 495,\n      columnNumber: 15\n    }\n  }), dataState.diagramControlParameter[Control.visit].visible && /*#__PURE__*/React.createElement(FormControl, {\n    variant: \"outlined\",\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 511,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(InputLabel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 512,\n      columnNumber: 17\n    }\n  }, \"Visit\"), /*#__PURE__*/React.createElement(Select, {\n    label: \"Visit\",\n    value: props.controls.visit,\n    onChange: event => {\n      const valueString = event.target.value;\n      let value = Visit.all;\n\n      switch (valueString) {\n        case 'BASELINE':\n          {\n            value = Visit.baseline;\n            break;\n          }\n\n        case 'FOLLOW':\n          {\n            value = Visit.follow;\n            break;\n          }\n      }\n\n      props.onControlsChanged(props.controls.identifier, {\n        visit: value\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 513,\n      columnNumber: 17\n    }\n  }, visitOptions.map(option => /*#__PURE__*/React.createElement(MenuItem, {\n    key: option.value,\n    value: option.value,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 535,\n      columnNumber: 21\n    }\n  }, option.label)))), props.controls.visit === Visit.follow && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"followup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 544,\n      columnNumber: 15\n    }\n  }, dataState.diagramControlParameter[Control.followup].visible && /*#__PURE__*/React.createElement(TextField, {\n    type: \"number\",\n    variant: \"outlined\",\n    label: \"Months from first visit\",\n    value: props.controls.followup || 0,\n    onChange: event => {\n      props.onControlsChanged(props.controls.identifier, {\n        followup: +event.target.value\n      });\n    },\n    InputProps: {\n      inputProps: {\n        min: 0\n      }\n    },\n    className: \"followup__months\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 547,\n      columnNumber: 19\n    }\n  }), dataState.diagramControlParameter[Control.tolerance].visible && /*#__PURE__*/React.createElement(TextField, {\n    type: \"number\",\n    variant: \"outlined\",\n    label: \"+/-\",\n    value: props.controls.tolerance || 0,\n    onChange: event => {\n      props.onControlsChanged(props.controls.identifier, {\n        tolerance: +event.target.value\n      });\n    },\n    className: \"followup__tolerance\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 564,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form__title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 580,\n      columnNumber: 13\n    }\n  }, \"Display Options\"), dataState.diagramControlParameter[Control.fit].visible && /*#__PURE__*/React.createElement(FormControl, {\n    variant: \"outlined\",\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 583,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(InputLabel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 584,\n      columnNumber: 17\n    }\n  }, \"Fit\"), /*#__PURE__*/React.createElement(Select, {\n    value: props.controls.fit,\n    onChange: event => {\n      //console.log(event.target.value);\n      props.onControlsChanged(props.controls.identifier, {\n        fit: event.target.value || Fit.none\n      });\n    },\n    label: \"fit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 585,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    value: Fit.none,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 595,\n      columnNumber: 19\n    }\n  }, \"none\"), /*#__PURE__*/React.createElement(MenuItem, {\n    value: Fit.regression,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 596,\n      columnNumber: 19\n    }\n  }, \"regression\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"switches\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 602,\n      columnNumber: 13\n    }\n  }, dataState.diagramControlParameter[Control.norm].visible && /*#__PURE__*/React.createElement(FormControlLabel, {\n    control: /*#__PURE__*/React.createElement(Switch, {\n      checked: props.controls.norm,\n      onChange: event => {\n        props.onControlsChanged(props.controls.identifier, {\n          norm: event.target.checked\n        });\n      },\n      color: \"primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 606,\n        columnNumber: 21\n      }\n    }),\n    label: \"Normalize\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 604,\n      columnNumber: 17\n    }\n  }), dataState.diagramControlParameter[Control.stack].visible && /*#__PURE__*/React.createElement(FormControlLabel, {\n    control: /*#__PURE__*/React.createElement(Switch, {\n      checked: props.controls.stack,\n      onChange: event => {\n        props.onControlsChanged(props.controls.identifier, {\n          stack: event.target.checked\n        });\n      },\n      color: \"primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 623,\n        columnNumber: 21\n      }\n    }),\n    label: \"Stack\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 621,\n      columnNumber: 17\n    }\n  })), dataState.diagramControlParameter[Control.legend].visible && /*#__PURE__*/React.createElement(FormControl, {\n    variant: \"outlined\",\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 639,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(InputLabel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 640,\n      columnNumber: 17\n    }\n  }, \"Legend\"), /*#__PURE__*/React.createElement(Select, {\n    value: props.controls.legend,\n    onChange: event => {\n      props.onControlsChanged(props.controls.identifier, {\n        legend: event.target.value || Legend.none\n      });\n    },\n    label: \"Legend\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 641,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    value: Legend.none,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 650,\n      columnNumber: 19\n    }\n  }, \"no\"), /*#__PURE__*/React.createElement(MenuItem, {\n    value: Legend.legend,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 651,\n      columnNumber: 19\n    }\n  }, \"yes\"))), dataState.diagramControlParameter[Control.bins].visible && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"slider\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 658,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    id: \"viewer-configuration-bin-acuteness-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 659,\n      columnNumber: 17\n    }\n  }, \"Bin acuteness\"), /*#__PURE__*/React.createElement(Slider, {\n    value: currentBin !== null ? currentBin : props.controls.bins || 0,\n    onChange: (event, newValue) => {\n      const value = newValue;\n      setCurrentBin(value);\n    },\n    onChangeCommitted: (event, newValue) => {\n      setCurrentBin(null);\n      const value = newValue;\n\n      if (value !== props.controls.bins) {\n        props.onControlsChanged(props.controls.identifier, {\n          bins: value\n        });\n      }\n    },\n    \"aria-labelledby\": \"viewer-configuration-bin-acuteness-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 663,\n      columnNumber: 17\n    }\n  })))));\n};\n\nexport default Controls;","map":{"version":3,"sources":["/Users/philippwegner/Desktop/UKB/git/PostIDSN-Viewer/src/containers/Controls.tsx"],"names":["React","useState","InputLabel","MenuItem","Select","FormControlLabel","Switch","Slider","Typography","TextField","Card","CardContent","IconButton","CardHeader","Fit","Legend","CloseIcon","FormControl","Autocomplete","Alert","DiagramType","Control","Visit","diagramTypeOptions","label","value","Scatter","Histogram","Bar","Timeline","visitOptions","all","baseline","follow","diagramControlParameters","attX","visible","datatypes","Attributes","Datatype","float","int","attY","attC","subgroups","patients","code","dt","visit","followup","tolerance","fit","norm","stack","legend","bins","date","initialDiagramType","Controls","props","useEffect","onPropsChanged","filterItems","filter","initialDataState","diagramType","diagramControlParameter","attXData","attYData","attCData","dataState","setDataState","currentBin","setCurrentBin","controls","type","onDiagramTypeChange","onClose","event","onControlsChanged","identifier","target","map","sort","a","b","topic","localeCompare","option","attributeTooltip","find","attribute","_event","newValue","params","inputProps","min","valueString","none","regression","checked"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport './Controls.css';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Switch from '@material-ui/core/Switch';\nimport Slider from '@material-ui/core/Slider';\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport IconButton from '@material-ui/core/IconButton';\nimport CardHeader from '@material-ui/core/CardHeader';\n//import * as Attributes from '../services/Attributes_old';\nimport { Fit, Legend } from '../services/Backend';\nimport CloseIcon from '@material-ui/icons/Close';\nimport FormControl from '@material-ui/core/FormControl';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport Alert from '@material-ui/lab/Alert';\n\n// STRUCTURES\n\nexport enum DiagramType {\n  Scatter = 1,\n  Histogram = 2,\n  Bar = 3,\n  Timeline = 4,\n}\n\nenum Control {\n  attX,\n  attY,\n  attC,\n  dt,\n  visit,\n  followup,\n  tolerance,\n  fit,\n  norm,\n  stack,\n  legend,\n  bins,\n}\n\nexport interface ControlsState {\n  identifier: string;\n  type: DiagramType;\n  attX: string;\n  attY: string;\n  attC: string;\n  dt: number;\n  visit: Visit;\n  followup: number;\n  tolerance: number;\n  norm: boolean;\n  stack: boolean;\n  fit: Fit;\n  legend: Legend;\n  bins: number;\n}\n\nexport enum Visit {\n  all = 'ALL',\n  baseline = 'BASELINE',\n  follow = 'FOLLOW',\n}\n\n// CONFIG\n\nconst diagramTypeOptions = [\n  { label: 'Scatter', value: DiagramType.Scatter },\n  { label: 'Histogram', value: DiagramType.Histogram },\n  { label: 'Bar', value: DiagramType.Bar },\n  { label: 'Timeline', value: DiagramType.Timeline },\n];\n\nconst visitOptions = [\n  { label: 'All visits', value: Visit.all },\n  { label: 'First visit', value: Visit.baseline },\n  { label: 'Follow-up visits', value: Visit.follow },\n];\n\ntype DiagramControlParameter = {\n  [key in Control]: {\n    visible: boolean;\n    datatypes?: Attributes.Datatype[];\n  };\n};\n\ntype DiagramControlParameters = {\n  [key in DiagramType]: DiagramControlParameter;\n};\n\nconst diagramControlParameters: DiagramControlParameters = {\n  [DiagramType.Scatter]: {\n    [Control.attX]: {\n      visible: true,\n      datatypes: [Attributes.Datatype.float, Attributes.Datatype.int],\n    },\n    [Control.attY]: {\n      visible: true,\n      datatypes: [Attributes.Datatype.float, Attributes.Datatype.int],\n    },\n    [Control.attC]: {\n      visible: true,\n      datatypes: [\n        Attributes.Datatype.subgroups,\n        Attributes.Datatype.patients,\n        Attributes.Datatype.float,\n        Attributes.Datatype.int,\n        Attributes.Datatype.code,\n      ],\n    },\n    [Control.dt]: {\n      visible: true,\n    },\n    [Control.visit]: {\n      visible: true,\n    },\n    [Control.followup]: {\n      visible: true,\n    },\n    [Control.tolerance]: {\n      visible: true,\n    },\n    [Control.fit]: {\n      visible: true,\n    },\n    [Control.norm]: {\n      visible: false,\n    },\n    [Control.stack]: {\n      visible: false,\n    },\n    [Control.legend]: {\n      visible: true,\n    },\n    [Control.bins]: {\n      visible: false,\n    },\n  },\n  [DiagramType.Histogram]: {\n    [Control.attX]: {\n      visible: true,\n      datatypes: [Attributes.Datatype.float, Attributes.Datatype.int],\n    },\n    [Control.attY]: {\n      visible: false,\n      datatypes: [],\n    },\n    [Control.attC]: {\n      visible: true,\n      datatypes: [\n        Attributes.Datatype.subgroups,\n        Attributes.Datatype.patients,\n        Attributes.Datatype.code,\n      ],\n    },\n    [Control.dt]: {\n      visible: true,\n    },\n    [Control.visit]: {\n      visible: true,\n    },\n    [Control.followup]: {\n      visible: true,\n    },\n    [Control.tolerance]: {\n      visible: true,\n    },\n    [Control.fit]: {\n      visible: false,\n    },\n    [Control.norm]: {\n      visible: true,\n    },\n    [Control.stack]: {\n      visible: true,\n    },\n    [Control.legend]: {\n      visible: true,\n    },\n    [Control.bins]: {\n      visible: true,\n    },\n  },\n  [DiagramType.Bar]: {\n    [Control.attX]: {\n      visible: true,\n      datatypes: [\n        Attributes.Datatype.subgroups,\n        Attributes.Datatype.patients,\n        Attributes.Datatype.code,\n      ],\n    },\n    [Control.attY]: {\n      visible: false,\n      datatypes: [],\n    },\n    [Control.attC]: {\n      visible: true,\n      datatypes: [\n        Attributes.Datatype.subgroups,\n        Attributes.Datatype.patients,\n        Attributes.Datatype.code,\n      ],\n    },\n    [Control.dt]: {\n      visible: true,\n    },\n    [Control.visit]: {\n      visible: true,\n    },\n    [Control.followup]: {\n      visible: true,\n    },\n    [Control.tolerance]: {\n      visible: true,\n    },\n    [Control.fit]: {\n      visible: false,\n    },\n    [Control.norm]: {\n      visible: true,\n    },\n    [Control.stack]: {\n      visible: true,\n    },\n    [Control.legend]: {\n      visible: true,\n    },\n    [Control.bins]: {\n      visible: false,\n    },\n  },\n  [DiagramType.Timeline]: {\n    [Control.attX]: {\n      visible: true,\n      datatypes: [Attributes.Datatype.date],\n    },\n    [Control.attY]: {\n      visible: true,\n      datatypes: [Attributes.Datatype.float, Attributes.Datatype.int],\n    },\n    [Control.attC]: {\n      visible: true,\n      datatypes: [Attributes.Datatype.float, Attributes.Datatype.int],\n    },\n    [Control.dt]: {\n      visible: true,\n    },\n    [Control.visit]: {\n      visible: true,\n    },\n    [Control.followup]: {\n      visible: true,\n    },\n    [Control.tolerance]: {\n      visible: true,\n    },\n    [Control.fit]: {\n      visible: true,\n    },\n    [Control.norm]: {\n      visible: false,\n    },\n    [Control.stack]: {\n      visible: false,\n    },\n    [Control.legend]: {\n      visible: true,\n    },\n    [Control.bins]: {\n      visible: false,\n    },\n  },\n};\n\nexport const initialDiagramType: DiagramType = DiagramType.Scatter;\n\n// PROPS\n\ninterface Props {\n  controls: ControlsState;\n  onControlsChanged: (\n    identifier: string,\n    controls: Partial<ControlsState>,\n  ) => void;\n  onClose: () => void;\n}\n\nconst Controls: React.FunctionComponent<Props> = props => {\n  React.useEffect(() => {\n    onPropsChanged();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props]);\n\n  // HELPER (see second part below)\n\n  const filterItems = (\n    datatypes: Attributes.Datatype[],\n  ): Attributes.Attribute[] => {\n    return Attributes.filter(datatypes);\n  };\n\n  // STATES\n\n  // dataState\n  interface DataState {\n    diagramType: DiagramType;\n    diagramControlParameter: DiagramControlParameter;\n    attXData: Attributes.Attribute[];\n    attYData: Attributes.Attribute[];\n    attCData: Attributes.Attribute[];\n  }\n  const initialDataState: DataState = {\n    diagramType: initialDiagramType,\n    diagramControlParameter: diagramControlParameters[initialDiagramType],\n    attXData: filterItems(\n      diagramControlParameters[initialDiagramType][Control.attX].datatypes ||\n        [],\n    ),\n    attYData: filterItems(\n      diagramControlParameters[initialDiagramType][Control.attY].datatypes ||\n        [],\n    ),\n    attCData: filterItems(\n      diagramControlParameters[initialDiagramType][Control.attC].datatypes ||\n        [],\n    ),\n  };\n  const [dataState, setDataState] = useState<DataState>(initialDataState);\n  const [currentBin, setCurrentBin] = useState<number | null>(null);\n\n  // HANDLERS\n\n  const onPropsChanged = () => {\n    if (props.controls && props.controls.type !== dataState.diagramType) {\n      onDiagramTypeChange(props.controls.type);\n    }\n  };\n\n  const onDiagramTypeChange = (value: DiagramType) => {\n    setDataState({\n      diagramType: value,\n      diagramControlParameter: diagramControlParameters[value],\n      attXData: filterItems(\n        diagramControlParameters[value][Control.attX].datatypes || [],\n      ),\n      attYData: filterItems(\n        diagramControlParameters[value][Control.attY].datatypes || [],\n      ),\n      attCData: filterItems(\n        diagramControlParameters[value][Control.attC].datatypes || [],\n      ),\n    });\n  };\n\n  // HELPER (see first part above)\n\n  // RENDER\n\n  return (\n    <Card className=\"configuration\">\n      <CardHeader\n        subheader=\"Plot Configurations\"\n        action={\n          <IconButton\n            size=\"small\"\n            aria-label=\"close\"\n            onClick={() => {\n              props.onClose();\n            }}\n            className=\"grid__item--close\"\n          >\n            <CloseIcon />\n          </IconButton>\n        }\n      />\n      <CardContent className=\"configuration__content\">\n        {!props.controls ? (\n          <Alert severity=\"info\">No plot selected</Alert>\n        ) : (\n          <>\n            <div className=\"form__title\">Graph Data</div>\n\n            <FormControl variant=\"outlined\" fullWidth>\n              <InputLabel>Plot type</InputLabel>\n              <Select\n                value={props.controls.type}\n                onChange={event => {\n                  props.onControlsChanged(props.controls.identifier, {\n                    type: event.target.value as number,\n                  });\n                }}\n                label=\"Plot type\"\n              >\n                {diagramTypeOptions.map(diagramType => (\n                  <MenuItem key={diagramType.value} value={diagramType.value}>\n                    {diagramType.label}\n                  </MenuItem>\n                ))}\n              </Select>\n            </FormControl>\n\n            {dataState.diagramControlParameter[Control.attX].visible && (\n              <FormControl variant=\"outlined\" fullWidth>\n                <Autocomplete\n                  options={dataState.attXData.sort(\n                    (a, b) => -b.topic.localeCompare(a.topic),\n                  )}\n                  groupBy={option => option.topic}\n                  getOptionLabel={option => option.attributeTooltip}\n                  value={\n                    dataState.attXData.find(\n                      a => a.attribute === props.controls.attX,\n                    ) || null\n                  }\n                  onChange={(_event, newValue) => {\n                    props.onControlsChanged(props.controls.identifier, {\n                      attX: newValue?.attribute || '',\n                    });\n                  }}\n                  renderInput={params => (\n                    <TextField\n                      {...params}\n                      label=\"X-coordinate item\"\n                      variant=\"outlined\"\n                    />\n                  )}\n                />\n              </FormControl>\n            )}\n\n            {dataState.diagramControlParameter[Control.attY].visible && (\n              <FormControl variant=\"outlined\" fullWidth>\n                <Autocomplete\n                  options={dataState.attYData.sort(\n                    (a, b) => -b.topic.localeCompare(a.topic),\n                  )}\n                  groupBy={option => option.topic}\n                  getOptionLabel={option => option.attributeTooltip}\n                  value={\n                    dataState.attYData.find(\n                      a => a.attribute === props.controls.attY,\n                    ) || null\n                  }\n                  onChange={(_event, newValue) => {\n                    props.onControlsChanged(props.controls.identifier, {\n                      attY: newValue?.attribute || '',\n                    });\n                  }}\n                  renderInput={params => (\n                    <TextField\n                      {...params}\n                      label=\"Y-coordinate item\"\n                      variant=\"outlined\"\n                    />\n                  )}\n                />\n              </FormControl>\n            )}\n\n            {dataState.diagramControlParameter[Control.attC].visible && (\n              <FormControl variant=\"outlined\" fullWidth>\n                <Autocomplete\n                  options={dataState.attCData.sort(\n                    (a, b) => -b.topic.localeCompare(a.topic),\n                  )}\n                  groupBy={option => option.topic}\n                  getOptionLabel={option => option.attributeTooltip}\n                  value={\n                    dataState.attCData.find(\n                      a => a.attribute === props.controls.attC,\n                    ) || null\n                  }\n                  onChange={(_event, newValue) => {\n                    props.onControlsChanged(props.controls.identifier, {\n                      attC: newValue?.attribute || '',\n                    });\n                  }}\n                  renderInput={params => (\n                    <TextField\n                      {...params}\n                      label=\"Third item\"\n                      variant=\"outlined\"\n                    />\n                  )}\n                />\n              </FormControl>\n            )}\n\n            {dataState.diagramControlParameter[Control.dt].visible && (\n              <TextField\n                variant=\"outlined\"\n                fullWidth\n                type=\"number\"\n                label=\"Time span of a visit (Days)\"\n                value={props.controls.dt || 0}\n                onChange={event => {\n                  props.onControlsChanged(props.controls.identifier, {\n                    dt: +event.target.value,\n                  });\n                }}\n                InputProps={{ inputProps: { min: 0 } }}\n              />\n            )}\n\n            {dataState.diagramControlParameter[Control.visit].visible && (\n              <FormControl variant=\"outlined\" fullWidth>\n                <InputLabel>Visit</InputLabel>\n                <Select\n                  label=\"Visit\"\n                  value={props.controls.visit}\n                  onChange={event => {\n                    const valueString: string = event.target.value as string;\n                    let value: Visit = Visit.all;\n                    switch (valueString) {\n                      case 'BASELINE': {\n                        value = Visit.baseline;\n                        break;\n                      }\n                      case 'FOLLOW': {\n                        value = Visit.follow;\n                        break;\n                      }\n                    }\n                    props.onControlsChanged(props.controls.identifier, {\n                      visit: value,\n                    });\n                  }}\n                >\n                  {visitOptions.map(option => (\n                    <MenuItem key={option.value} value={option.value}>\n                      {option.label}\n                    </MenuItem>\n                  ))}\n                </Select>\n              </FormControl>\n            )}\n\n            {props.controls.visit === Visit.follow && (\n              <div className=\"followup\">\n                {dataState.diagramControlParameter[Control.followup]\n                  .visible && (\n                  <TextField\n                    type=\"number\"\n                    variant=\"outlined\"\n                    label=\"Months from first visit\"\n                    value={props.controls.followup || 0}\n                    onChange={event => {\n                      props.onControlsChanged(props.controls.identifier, {\n                        followup: +event.target.value,\n                      });\n                    }}\n                    InputProps={{ inputProps: { min: 0 } }}\n                    className=\"followup__months\"\n                  />\n                )}\n\n                {dataState.diagramControlParameter[Control.tolerance]\n                  .visible && (\n                  <TextField\n                    type=\"number\"\n                    variant=\"outlined\"\n                    label=\"+/-\"\n                    value={props.controls.tolerance || 0}\n                    onChange={event => {\n                      props.onControlsChanged(props.controls.identifier, {\n                        tolerance: +event.target.value,\n                      });\n                    }}\n                    className=\"followup__tolerance\"\n                  />\n                )}\n              </div>\n            )}\n\n            <div className=\"form__title\">Display Options</div>\n\n            {dataState.diagramControlParameter[Control.fit].visible && (\n              <FormControl variant=\"outlined\" fullWidth>\n                <InputLabel>Fit</InputLabel>\n                <Select\n                  value={props.controls.fit}\n                  onChange={event => {\n                    //console.log(event.target.value);\n                    props.onControlsChanged(props.controls.identifier, {\n                      fit: (event.target.value as Fit) || Fit.none,\n                    });\n                  }}\n                  label=\"fit\"\n                >\n                  <MenuItem value={Fit.none}>none</MenuItem>\n                  <MenuItem value={Fit.regression}>regression</MenuItem>\n                  {/* @TODO add more fit values here */}\n                </Select>\n              </FormControl>\n            )}\n\n            <div className=\"switches\">\n              {dataState.diagramControlParameter[Control.norm].visible && (\n                <FormControlLabel\n                  control={\n                    <Switch\n                      checked={props.controls.norm}\n                      onChange={event => {\n                        props.onControlsChanged(props.controls.identifier, {\n                          norm: event.target.checked,\n                        });\n                      }}\n                      color=\"primary\"\n                    />\n                  }\n                  label=\"Normalize\"\n                />\n              )}\n\n              {dataState.diagramControlParameter[Control.stack].visible && (\n                <FormControlLabel\n                  control={\n                    <Switch\n                      checked={props.controls.stack}\n                      onChange={event => {\n                        props.onControlsChanged(props.controls.identifier, {\n                          stack: event.target.checked,\n                        });\n                      }}\n                      color=\"primary\"\n                    />\n                  }\n                  label=\"Stack\"\n                />\n              )}\n            </div>\n\n            {dataState.diagramControlParameter[Control.legend].visible && (\n              <FormControl variant=\"outlined\" fullWidth>\n                <InputLabel>Legend</InputLabel>\n                <Select\n                  value={props.controls.legend}\n                  onChange={event => {\n                    props.onControlsChanged(props.controls.identifier, {\n                      legend: (event.target.value as Legend) || Legend.none,\n                    });\n                  }}\n                  label=\"Legend\"\n                >\n                  <MenuItem value={Legend.none}>no</MenuItem>\n                  <MenuItem value={Legend.legend}>yes</MenuItem>\n                  {/* @TODO add more legend values here */}\n                </Select>\n              </FormControl>\n            )}\n\n            {dataState.diagramControlParameter[Control.bins].visible && (\n              <div className=\"slider\">\n                <Typography id=\"viewer-configuration-bin-acuteness-label\">\n                  Bin acuteness\n                </Typography>\n\n                <Slider\n                  value={\n                    currentBin !== null ? currentBin : props.controls.bins || 0\n                  }\n                  onChange={(event: any, newValue: number | number[]) => {\n                    const value = newValue as number;\n                    setCurrentBin(value);\n                  }}\n                  onChangeCommitted={(\n                    event: any,\n                    newValue: number | number[],\n                  ) => {\n                    setCurrentBin(null);\n                    const value = newValue as number;\n                    if (value !== props.controls.bins) {\n                      props.onControlsChanged(props.controls.identifier, {\n                        bins: value,\n                      });\n                    }\n                  }}\n                  aria-labelledby=\"viewer-configuration-bin-acuteness-label\"\n                />\n              </div>\n            )}\n          </>\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default Controls;\n"]},"metadata":{},"sourceType":"module"}